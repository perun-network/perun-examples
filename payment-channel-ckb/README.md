# Payment Chanenl on CKB

This demo connects to our [Perun-CKB-Contracts] that run on the Local CKB Devnet byusing our [CKB Backend].

## Requirement
We use various tools to enable a convenient setup for the local development devnet. If you want to use our `setup-devnet.sh` script, make sure the following commandline tools are installed:
* `jq`:
  - Used to parse and edit some configuration files.
* `sed` and `awk`:
  - We modify some fields of the files generated by the `ckb init --chain dev` command using `sed` and `awk`.
* `tmux` and `tmuxp`:
  - `tmuxp` is a session manager for `tmux` that allows to easily create descriptive `.yaml` configuration files to create and attach to `tmux` sessions.
* `expect`:
  - We completely automize the process for test-wallet creation, deploying of contracts etc. To make this work reliably, we use `expect` which allows to describe how a commandline application is fed input.
* `make`:
  - Not strictly necessary, but it should be available on most systems by default. In case you do not want to install `make` check out the `Makefile` content and issue the command on your own.
* `ckb` with version `0.201.0` or higher.
* `ckb-cli` with version `1.13.0` or higher.

Also follow the installation of [Perun-CKB-Contracts] requirements.

Before going through the demo, initialize the submodule.
```
git submodule update --init --recursive
```

## Example Walkthrough
1. In another terminal, start the local CKB Devnet and wait 10-15 seconds for the contracts' deployment: 
```sh
cd devnet
make dev
```

1. On the second terminal, run the demo.
```sh
cd payment-channel-ckb
go run .
```

<!-- Links -->
[Perun-CKB-Contracts]: https://github.com/perun-network/perun-ckb-contract/

[CKB Backend]: https://github.com/perun-network/perun-ckb-backend